<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta name="theme-color" content="#000000" />
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
			rel="stylesheet"
		/>
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Anton&display=swap"
			rel="stylesheet"
		/>
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />

		<title>Swipeyai</title>
	</head>
	<body>
		<noscript>You need to enable JavaScript to run this app.</noscript>
		<div id="root"></div>

		<script>
			;(function () {
				const currentParams = new URLSearchParams(window.location.search)
				if ([...currentParams].length === 0) return
				// –µ—Å–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –Ω–µ—Ç ‚Äî –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º

				const links = document.querySelectorAll('a[href]')

				links.forEach(link => {
					try {
						const url = new URL(link.href, window.location.origin)
						currentParams.forEach((value, key) => {
							url.searchParams.set(key, value)
							// –∑–∞–º–µ–Ω–∏—Ç, –µ—Å–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä —É–∂–µ –µ—Å—Ç—å
						})
						link.href = url.toString()
					} catch (e) {
						console.warn(`–ù–µ–≤–∞–ª–∏–¥–Ω—ã–π URL: ${link.href}`)
					}
				})
			})()
		</script>
		<script>
			let params = new URLSearchParams(document.location.search)

			const xhr = new XMLHttpRequest()

			var form = document.getElementById('email-form')
			var responseJSON

			if (typeof rtkClickID == 'undefined') {
				rtkClickId = 'id' + Date.now()
			}

			form.setAttribute('onsubmit', 'sendXHR()')

			xhr.open('POST', 'https://swipey.ai/api/v1/auth/pre-lander')
			xhr.setRequestHeader('Content-Type', 'application/json; charset=UTF-8')
			xhr.setRequestHeader('x-api-key', '9e3132a0-106a-410b-8e3a-c04aa0f298c3')

			const body = {
				clickId: rtkClickID,
			}

			xhr.onload = () => {
				if (xhr.readyState == 4 && xhr.status == 201) {
					responseJSON = JSON.parse(xhr.response)
					console.log('Redirect URL:', responseJSON)
					// üëà Check what this logs
					window.location.href = `${
						responseJSON.loginUrl
					}&cmpid=${rtkClickID}&pubid=${params.get(
						'pubid'
					)}&prelandername=${params.get(
						'prelandername'
					)}&utm_source=${params.get('utm_source')}&utm_medium=${params.get(
						'utm_medium'
					)}&utm_campaign=${params.get('utm_campaign')}`
				} else {
					console.log(`Error: ${xhr.status}`)
				}
			}

			function sendXHR() {
				body.email = document.getElementById('email').value
				body.password = document.getElementById('password').value
				xhr.send(JSON.stringify(body))
			}
		</script>
		<script>
			var button = document.getElementById('google-sign')
			var utmObj = {
				rtkcid: rtkClickID,
				click_id: rtkClickID,
				cmpid: rtkClickID,
				pubid: params.get('pubid'),
				prelandername: params.get('prelandername'),
				utm_source: params.get('utm_source'),
				utm_medium: params.get('utm_medium'),
				utm_campaign: params.get('utm_campaign'),
			}

			button.href =
				'https://swipey.ai/api/v1/auth/google/login?state=' +
				JSON.stringify(utmObj)
		</script>

		<script src="https://rtrk.swipey.club/uniclick.js?attribution=lastpaid&cookiedomain=www.swipeygirlfriend.com&cookieduration=90&defaultcampaignid=684adf7cefc4b9165d7039b0&regviewonce=false"></script>
	</body>
</html>
