<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta name="theme-color" content="#000000" />
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
			rel="stylesheet"
		/>
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Anton&display=swap"
			rel="stylesheet"
		/>
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />

		<title>Swipeyai</title>
	</head>
	<body>
		<noscript>You need to enable JavaScript to run this app.</noscript>
		<div id="root"></div>

		<script>
			function getUrlParams() {
				const params = new URLSearchParams(window.location.search)
				const result = {}
				for (const [key, value] of params.entries()) {
					result[key] = value
				}
				return result
			}

			// Function to save UTM and tracking parameters
			function saveTrackingParams(params) {
				// Define which parameters to track and save
				const trackingKeys = [
					'utm_source',
					'utm_medium',
					'utm_campaign',
					'utm_term',
					'utm_content',
					'pubid',
					'ref_id',
					'sub4',
					'sub18',
					'sub19',
					'gclid', // Google Click ID
					'fbclid', // Facebook Click ID
					'msclkid', // Microsoft Click ID
				]

				const trackingParams = {}
				let hasTrackingParams = false

				// Extract only tracking parameters
				trackingKeys.forEach(key => {
					if (params[key]) {
						trackingParams[key] = params[key]
						hasTrackingParams = true
					}
				})

				if (hasTrackingParams) {
					// Save to localStorage (persists across browser sessions)
					localStorage.setItem('trackingParams', JSON.stringify(trackingParams))

					// Save to sessionStorage (persists for current session)
					sessionStorage.setItem(
						'trackingParams',
						JSON.stringify(trackingParams)
					)

					// Save with timestamp for analytics
					const trackingData = {
						params: trackingParams,
						timestamp: new Date().toISOString(),
						page: window.location.pathname,
						referrer: document.referrer,
					}

					localStorage.setItem('trackingData', JSON.stringify(trackingData))

					console.log('Tracking parameters saved:', trackingParams)
				}
			}

			// Function to get saved tracking parameters
			function getSavedTrackingParams() {
				try {
					const saved = localStorage.getItem('trackingParams')
					return saved ? JSON.parse(saved) : {}
				} catch (error) {
					console.error('Error loading saved tracking params:', error)
					return {}
				}
			}

			// Function to update all buttons and links on the page
			function updateButtons(params) {
				const buttons = document.querySelectorAll('a, button')
				if (!buttons.length) return

				// Merge current params with saved params (current params take priority)
				const savedParams = getSavedTrackingParams()
				const allParams = { ...savedParams, ...params }

				const paramString = Object.keys(allParams)
					.map(key => `${key}=${encodeURIComponent(allParams[key])}`)
					.join('&')

				if (paramString) {
					buttons.forEach(button => {
						if (button.tagName === 'A' && button.href) {
							const url = new URL(button.href)
							// Only add params to internal links or if href is relative
							if (
								url.hostname === window.location.hostname ||
								button.href.startsWith('/') ||
								button.href.startsWith('./')
							) {
								url.search = paramString
								button.href = url.toString()
							}
						}
					})
				}
			}

			// Make functions available globally for debugging
			window.getSavedTrackingParams = getSavedTrackingParams
		</script>

		<script src="https://rtrk.swipey.club/uniclick.js?attribution=lastpaid&cookiedomain=www.swipeygirlfriend.com&cookieduration=90&defaultcampaignid=684adf7cefc4b9165d7039b0&regviewonce=false"></script>
	</body>
</html>
